var Admin=function(){var e,t,a;return{init:function(){jQuery(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}),jQuery(".event-manager-select-chosen").length>0&&jQuery(".event-manager-select-chosen").chosen(),jQuery("input[name=_event_time_format]").on("change",Admin.actions.showSelectedTimeFormat),jQuery(".wpem-tabs li a").on("click",Admin.actions.tabClick),jQuery(".wpem-tabs li a:first").click(),jQuery(document).on("click",".event-manager-remove-uploaded-file",function(e){e.preventDefault();var t=jQuery(this).closest(".event-manager-uploaded-files");t.find(".event-manager-uploaded-file-preview").remove(),t.find('input[type="hidden"]').val("")}),jQuery('input[data-picker="datepicker"]#_event_start_date').length>0&&(wp_event_manager_admin_js.start_of_week=parseInt(wp_event_manager_admin_js.start_of_week),wp_event_manager_admin_js.show_past_date?jQuery('input[data-picker="datepicker"]#_event_start_date').datepicker({dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week}).on("change",function(){jQuery("#_event_end_date").datepicker("destroy"),jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker({minDate:jQuery("#_event_start_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week})}):jQuery('input[data-picker="datepicker"]#_event_start_date').datepicker({minDate:0,dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week}).on("change",function(){jQuery("#_event_end_date").datepicker("destroy"),jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker({minDate:jQuery("#_event_start_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week})})),jQuery('input[data-picker="datepicker"]#_event_end_date').length>0&&jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker({dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week,beforeShow:function(e,t){var a=jQuery('input[data-picker="datepicker"]#_event_start_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",a)}}).on("change",function(){jQuery("#_event_registration_deadline").datepicker("destroy"),wp_event_manager_admin_js.show_past_date?jQuery('input[data-picker="datepicker"]#_event_registration_deadline').datepicker({maxDate:jQuery("#_event_end_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week}):jQuery('input[data-picker="datepicker"]#_event_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#_event_end_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week})}),jQuery("#_event_start_time").length>0&&jQuery("#_event_start_time").timepicker({timeFormat:wp_event_manager_admin_js.i18n_timepicker_format,step:wp_event_manager_admin_js.i18n_timepicker_step}),jQuery("#_event_end_time").length>0&&jQuery("#_event_end_time").timepicker({timeFormat:wp_event_manager_admin_js.i18n_timepicker_format,step:wp_event_manager_admin_js.i18n_timepicker_step}),jQuery("#_event_timezone").length>0&&jQuery("#_event_timezone").chosen({search_contains:!0}),jQuery('input[data-picker="datepicker"]#_event_registration_deadline').length>0&&(wp_event_manager_admin_js.show_past_date?jQuery('input[data-picker="datepicker"]#_event_registration_deadline').datepicker({maxDate:jQuery("#_event_end_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week}):jQuery('input[data-picker="datepicker"]#_event_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#_event_end_date").val(),dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week})),jQuery('input[data-picker="datepicker"]#_event_expiry_date').length>0&&(wp_event_manager_admin_js.show_past_date?jQuery("input#_event_expiry_date").datepicker({dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week,beforeShow:function(e,t){var a=jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",a)}}):jQuery("input#_event_expiry_date").datepicker({minDate:0,dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week,beforeShow:function(e,t){var a=jQuery('input[data-picker="datepicker"]#_event_end_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",a)}})),jQuery('input[data-picker="datepicker"]').length>0&&(wp_event_manager_admin_js.show_past_date?jQuery('input[data-picker="datepicker"]').datepicker({dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week}):jQuery('input[data-picker="datepicker"]').datepicker({minDate:0,dateFormat:wp_event_manager_admin_js.i18n_datepicker_format,firstDay:wp_event_manager_admin_js.start_of_week})),jQuery("p.form-field-author").on("click",Admin.author.changeAuthor),jQuery("#setting-event_manager_submission_expire_options").on("change",Admin.settings.selectEventExpiryOption),jQuery("body").on("click",".wp_event_manager_upload_file_button",Admin.fileUpload.addFile),jQuery(".wp_event_manager_add_another_file_button").on("click",Admin.fileUpload.addAnotherFile),jQuery("body").on("click",".wp_event_manager_upload_file_button_multiple",Admin.fileUpload.multipleFile),jQuery("body").on("click",".wp_event_manager_upload_file_button",Admin.fileUpload.addFile),jQuery(".wp_event_manager_add_another_file_button").on("click",Admin.fileUpload.addAnotherFile),jQuery("body").on("change","#_event_end_date, #_event_start_date, #_event_start_time, #_event_end_time",Admin.actions.checkEndDate),jQuery("#wp_event_manager_upgrade_database").on("click",Admin.actions.upgradeDatabase),jQuery("input[name=_enable_health_guideline]").on("change",Admin.actions.guidelineEvent),jQuery("input[name=_enable_health_guideline]:checked").length>0?jQuery("input[name=_enable_health_guideline]:checked").trigger("change"):jQuery("input[name=_enable_health_guideline][value='no']").prop("checked",!0).trigger("change"),jQuery("input[name=_enable_health_guideline_other]").on("change",Admin.actions.otherguidelineEvent),jQuery("input[name=_enable_health_guideline_other]:checked").length>0?jQuery("input[name=_enable_health_guideline_other]:checked").trigger("change"):jQuery("input[name=_enable_health_guideline_other][value='no']").prop("checked",!0).trigger("change"),jQuery("input[name=_event_online]").on("change",Admin.actions.onlineEvent),jQuery("input[name=_event_online]:checked").length>0&&jQuery("input[name=_event_online]:checked").trigger("change"),jQuery("input[name=_event_ticket_options]").on("change",Admin.actions.ticketPriceOption),jQuery("input[name=_event_ticket_options]:checked").length>0&&jQuery("input[name=_event_ticket_options]:checked").trigger("change"),jQuery("body").on("change","#_event_end_date",Admin.actions.setListingExpery),jQuery("#shortcode_list_filter_action").on("click",Admin.actions.getShortcodeList)},actions:{getShortcodeList:function(e){e.preventDefault();var t=jQuery("#wpem_shortcode_filter").val(),a=window.location.href;window.location=a+"&plugin="+t},tabClick:function(e){return e.preventDefault(),jQuery(".wpem_panel").hide(),jQuery(".nav-tab-active").removeClass("nav-tab-active"),jQuery(jQuery(this).attr("href")).show(),jQuery(this).addClass("nav-tab-active"),!1},showSelectedTimeFormat:function(e){e.preventDefault(),jQuery('input[name="_event_time_format"]').length>0&&Admin.timeFormatSettings()},upgradeDatabase:function(e){jQuery.ajax({url:wp_event_manager_admin_js.ajax_url,type:"POST",dataType:"json",data:{action:"wpem_upgrade_database"},beforeSend:function(){jQuery(".update-message").remove(),jQuery("hr.wp-header-end.extra").remove(),jQuery(".wp_event_manager_upgrade_database").before('<div class="update-message notice inline notice-warning notice-alt updating-message"><p>'+wp_event_manager_admin_js.upgrade_database_before_send_text+'...</p></div><hr class="wp-header-end extra">')},success:function(e){jQuery(".update-message").remove(),jQuery("hr.wp-header-end.extra").remove(),jQuery(".wpem-upgrade-database-notice").remove(),jQuery(".wp_event_manager_upgrade_database").before('<div class="update-message notice inline notice-alt updated-message notice-success"><p>'+wp_event_manager_admin_js.upgrade_database_success_send_text+'</p></div><hr class="wp-header-end extra">'),jQuery(".wp_event_manager_upgrade_database").remove()}})},onlineEvent:function(e){e.preventDefault(),"yes"==jQuery(this).val()?(jQuery("#_event_venue_name").closest(".form-field").hide(),jQuery("#_event_pincode").closest(".form-field").hide(),jQuery("#_event_location").closest(".form-field").hide(),jQuery("#_event_venue_ids").closest(".form-field").hide(),jQuery("#_event_country").closest(".form-field").hide()):(jQuery("#_event_venue_name").closest(".form-field").show(),jQuery("#_event_pincode").closest(".form-field").show(),jQuery("#_event_location").closest(".form-field").show(),jQuery("#_event_venue_ids").closest(".form-field").show(),jQuery("#_event_country").closest(".form-field").show())},guidelineEvent:function(e){e.preventDefault(),"yes"==jQuery(this).val()?(jQuery("._event_health_guidelines").closest(".form-field").show(),jQuery('[name="_enable_health_guideline_other"]').closest(".form-field").show()):(jQuery("._event_health_guidelines").closest(".form-field").hide(),jQuery('[name="_enable_health_guideline_other"]').closest(".form-field").hide(),jQuery('input[name="_enable_health_guideline_other"][value="no"]').prop("checked",!0).trigger("change"))},setListingExpery:function(e){e.preventDefault();var t=jQuery(this).val();""===jQuery("#_event_expiry_date").val()&&jQuery("#_event_expiry_date").val(t)},checkEndDate:function(e){let t=jQuery("#_event_start_date").val(),a=jQuery("#_event_end_date").val(),n=jQuery("#_event_start_time").val();t&&a&&t===a&&n?(jQuery("#_event_end_time").timepicker("remove"),jQuery("#_event_end_time").timepicker({timeFormat:wp_event_manager_admin_js.i18n_timepicker_format,step:wp_event_manager_admin_js.i18n_timepicker_step,disableTimeRanges:[["12:00am",n]],forceRoundTime:!0,showDuration:!1})):(jQuery("#_event_end_time").timepicker("remove"),jQuery("#_event_end_time").timepicker({timeFormat:wp_event_manager_admin_js.i18n_timepicker_format,step:wp_event_manager_admin_js.i18n_timepicker_step}))},otherguidelineEvent:function(e){e.preventDefault(),"yes"==jQuery(this).val()?jQuery("#_event_health_guidelines_other").closest(".form-field").show():jQuery("#_event_health_guidelines_other").closest(".form-field").hide()},ticketPriceOption:function(e){e.preventDefault(),"paid"==jQuery(this).val()?jQuery("#_event_ticket_price").closest(".form-field").show():jQuery("#_event_ticket_price").closest(".form-field").hide()}},author:{changeAuthor:function(e){return jQuery(this).closest("p").find(".current-author").hide(),jQuery(this).closest("p").find(".change-author").show(),!1}},settings:{selectEventExpiryOption:function(e){"days"==jQuery("#setting-event_manager_submission_expire_options option:selected").val()?jQuery("#setting-event_manager_submission_duration").closest("tr").show():jQuery("#setting-event_manager_submission_duration").closest("tr").hide(),e.preventDefault()}},fileUpload:{addFile:function(n){n.preventDefault(),t=(a=jQuery(this).closest(".event-manager-uploaded-file")).find("input");var i=jQuery(this).parents(".form-field")[0].dataset.fieldName,r=["jpg","gif","png","jpeg","jpe","webp"];if(file_target_wrapper_append=jQuery(this).closest(".event-manager-uploaded-file2"),e){e.open();return}(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery(t).val(attachment.url),jQuery(file_target_wrapper_append).find(".event-manager-uploaded-file").remove(),jQuery.inArray(attachment.subtype,r)>=0?jQuery(file_target_wrapper_append).prepend("<span class='event-manager-uploaded-file'><input type='hidden' name='"+i+"' id='"+i+"' placeholder='' value='"+attachment.url+"'><span class='event-manager-uploaded-file-preview'><img src='"+attachment.url+"'><a class='event-manager-remove-uploaded-file' href='javascript:void(0);'>[remove]</a></span>"):jQuery(file_target_wrapper_append).prepend("<span class='event-manager-uploaded-file'><input type='hidden' name='"+i+"' id='"+i+"' placeholder='' value='"+attachment.url+"'><span class='event-manager-uploaded-file-preview'><a class='event-manager-remove-uploaded-file' href='javascript:void(0);'>[remove]</a></span></span>")}),e.open()},multipleFile:function(n){n.preventDefault(),t=(a=jQuery(this).parent(".file_url").find(".event-manager-uploaded-file.multiple-file")).find("input");var i=jQuery(this).parents(".form-field")[0].dataset.fieldName,r=["jpg","gif","png","jpeg","jpe","webp"];if(file_target_wrapper_apeend=jQuery(this).prev(),e){e.open();return}(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!0})).on("select",function(){attachment=e.state().get("selection").map(function(e){return e.toJSON(),e}),jQuery.each(attachment,function(e,a){jQuery(t).val(a.attributes.url),jQuery.inArray(a.attributes.subtype,r)>=0?jQuery(file_target_wrapper_apeend).append("<span class='event-manager-uploaded-file multiple-file'><input type='hidden' name='"+i+"[]' placeholder='' value='"+a.attributes.url+"'><span class='event-manager-uploaded-file-preview'><img src='"+a.attributes.url+"'><a class='event-manager-remove-uploaded-file' href='javascript:void(0);'>[remove]</a></span>"):jQuery(file_target_wrapper_apeend).append("<span class='event-manager-uploaded-file multiple-file'><input type='hidden' name='"+i+"[]' placeholder='' value='"+a.attributes.url+"'><span class='event-manager-uploaded-file-preview'><a class='event-manager-remove-uploaded-file' href='javascript:void(0);'>[remove]</a></span></span>")})}),e.open()},addAnotherFile:function(e){e.preventDefault(),jQuery(this).closest(".form-field");var t=jQuery(this).data("field_name"),a=jQuery(this).data("field_placeholder"),n=jQuery(this).data("uploader_button_text"),i=jQuery(this).data("uploader_button");jQuery(this).before('<span class="file_url"><input type="text" name="'+t+'[]" placeholder="'+a+'" /><button class="button button-small wp_event_manager_upload_file_button" data-uploader_button_text="'+n+'">'+i+"</button></span>")}}}};Admin=Admin(),jQuery(document).ready(function(e){Admin.init()});